<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>🎯 Gerador de Bilhete V2</title>
<style>
  body {
    font-family: 'Poppins', Arial, sans-serif;
    background-color: #0e0e0e;
    color: #f1f1f1;
    margin: 0;
    padding: 0;
    text-align: center;
  }

  h1 {
    margin-top: 30px;
    color: #00ff99;
    letter-spacing: 1px;
  }

  .container {
    background-color: #1b1b1b;
    padding: 25px;
    border-radius: 12px;
    width: 90%;
    max-width: 650px;
    margin: 30px auto;
    box-shadow: 0 0 15px rgba(0, 255, 153, 0.15);
  }

  label, select, input {
    display: block;
    margin: 10px auto;
    text-align: left;
    width: 80%;
    color: #ddd;
  }

  select, input {
    background: #2a2a2a;
    color: #fff;
    border: 1px solid #444;
    border-radius: 6px;
    padding: 8px;
    width: 100%;
    box-sizing: border-box;
  }

  .markets {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    margin: 10px 0;
  }

  .markets label {
    display: flex;
    align-items: center;
    width: auto;
    margin: 5px;
  }

  .markets input {
    margin-right: 5px;
  }

  button {
    background-color: #00ff99;
    border: none;
    color: #000;
    font-weight: bold;
    padding: 10px 20px;
    margin-top: 15px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.2s;
  }

  button:hover {
    background-color: #00cc7a;
  }

  pre {
    text-align: left;
    background: #111;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    white-space: pre-wrap;
    color: #d9d9d9;
  }

  .footer {
    color: #666;
    font-size: 13px;
    margin-top: 40px;
  }

  .stats span {
    font-weight: bold;
  }

  .stat-green { color: #00ff99; }
  .stat-yellow { color: #ffcc00; }
  .stat-red { color: #ff4d4d; }
</style>
</head>
<body>
  <h1>🎯 Gerador de Bilhete V2</h1>

  <div class="container">
    <p>Filtros de bilhete:</p>

    <label>Quantidade de jogos:
      <input id="qtd" type="number" min="1" value="3">
    </label>

    <label>Odd mínima por jogo:
      <input id="min" type="number" step="0.01" value="1.20">
    </label>

    <label>Odd máxima por jogo:
      <input id="max" type="number" step="0.01" value="2.50">
    </label>

    <div class="markets">
      <label><input type="checkbox" class="market" value="+1.5 gols" checked>+1.5 Gols</label>
      <label><input type="checkbox" class="market" value="ambas" checked>Ambas Marcam</label>
      <label><input type="checkbox" class="market" value="vitória casa" checked>Vitória Casa</label>
      <label><input type="checkbox" class="market" value="vitória fora" checked>Vitória Fora</label>
    </div>

    <button onclick="gerarBilhete()">Gerar Bilhete</button>
    <button onclick="copiarBilhete()">📋 Copiar Bilhete</button>
    <button onclick="baixarPDF()">💾 Baixar PDF</button>

    <pre id="saida">---</pre>

    <p style="text-align:left; font-size:13px; margin-top:20px;">
      🔹 JC: Jogos do time da casa jogando em casa<br>
      🔹 JF: Jogos do time visitante fora de casa<br>
      🔹 CD: Confrontos diretos entre os times
    </p>
  </div>

  <div class="footer">Desenvolvido por Kawan • ⚽ Estatísticas coloridas</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  // Lista de palpites com estatísticas
  const palpites = [
    { jogo: "Flamengo x Palmeiras", mercado: "+1.5 gols", odd: 1.45, jc:"3/5", jf:"3/5", cd:"3/5" },
    { jogo: "Mirassol x São Paulo", mercado: "+1.5 gols", odd: 1.50, jc:"9/10", jf:"3/5", cd:"11/12" },
    { jogo: "Getafe x Real Madrid", mercado: "vitória fora", odd: 1.40, jc:"4E 1V", jf:"4V 1D", cd:"8/10" },
    { jogo: "Celta de Vigo x Real Sociedad", mercado: "+0.5 gols casa", odd: 1.22, jc:"5/5", jf:"4/5", cd:"4/5" },
    { jogo: "Como x Juventus", mercado: "+1.5 gols", odd: 1.40, jc:"10/10", jf:"4/5", cd:"4/4" },
    { jogo: "Milan x Fiorentina", mercado: "vitória casa", odd: 1.55, jc:"4V 1D", jf:"4E 1V", cd:"2V 2D 1E" }
  ];

  function gerarBilhete() {
    const qtd = parseInt(document.getElementById("qtd").value);
    const oddMin = parseFloat(document.getElementById("min").value);
    const oddMax = parseFloat(document.getElementById("max").value);
    const mercadosSelecionados = Array.from(document.querySelectorAll(".market:checked")).map(m => m.value.toLowerCase());

    let filtrados = palpites.filter(p => p.odd >= oddMin && p.odd <= oddMax);
    filtrados = filtrados.filter(p => mercadosSelecionados.includes(p.mercado.toLowerCase()));

    if (filtrados.length === 0) {
      document.getElementById("saida").textContent = "❌ Nenhum jogo encontrado com esses filtros.";
      return;
    }

    const sorteados = filtrados.sort(() => 0.5 - Math.random()).slice(0, qtd);

    let texto = "";
    let totalOdd = 1;

    sorteados.forEach((p, i) => {
      let jcClass = getColorStat(p.jc), jfClass = getColorStat(p.jf), cdClass = getColorStat(p.cd);
      texto += `🏆 ${i+1}. ${p.jogo}\n`;
      texto += `   Mercado: ${p.mercado}\n`;
      texto += `   Odd: ${p.odd}\n`;
      texto += `   JC: ${colorText(p.jc, jcClass)} | JF: ${colorText(p.jf, jfClass)} | CD: ${colorText(p.cd, cdClass)}\n`;
      texto += "-----------------------------------\n";
      totalOdd *= p.odd;
    });

    texto += `\n💰 Odd total: ${totalOdd.toFixed(2)}`;
    document.getElementById("saida").innerHTML = texto;
  }

  function getColorStat(stat) {
    if (stat.includes("V") || parseInt(stat.split("/")[0]) / parseInt(stat.split("/")[1]) >= 0.7) return "stat-green";
    if (stat.includes("E") || parseInt(stat.split("/")[0]) / parseInt(stat.split("/")[1]) >= 0.5) return "stat-yellow";
    return "stat-red";
  }

  function colorText(text, className) {
    return `<span class="${className}">${text}</span>`;
  }

  function copiarBilhete() {
    const texto = document.getElementById("saida").innerText;
    navigator.clipboard.writeText(texto);
    alert("Bilhete copiado para a área de transferência!");
  }

  function baixarPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const texto = document.getElementById("saida").innerText;
    doc.setFontSize(12);
    doc.text(texto, 10, 10);
    const data = new Date();
    const filename = `bilhete-${String(data.getDate()).padStart(2,'0')}-${String(data.getMonth()+1).padStart(2,'0')}-${data.getFullYear()}.pdf`;
    doc.save(filename);
  }
</script>
</body>
</html>