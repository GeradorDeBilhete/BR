<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üéØ Gerador de Bilhete üéüÔ∏è <small>beta</small></title>

<!-- Fonte -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --bg:#000;
  --panel:#0b0b0b;
  --muted:#bfbfbf;
  --accent:#00ff88;
  --accent-2:#00cc66;
  --card:#0f0f0f;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Montserrat",system-ui,Arial,sans-serif;
  background:var(--bg);
  color:#f2f2f2;
  -webkit-font-smoothing:antialiased;
}
header{
  text-align:center;
  padding:28px 16px 8px;
}
h1{margin:0;color:var(--accent);font-size:20px;font-weight:700;letter-spacing:0.6px;text-shadow:0 0 8px rgba(0,255,136,0.08);}
.wrap{
  max-width:900px;margin:18px auto;padding:18px;background:var(--panel);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6);
}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between;}
label.ch{
  display:flex;align-items:center;gap:8px;color:var(--muted);font-size:14px;
}
.controls{
  padding:8px 0 6px;
  display:flex;flex-direction:column;gap:10px;
}
.field{
  display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap;justify-content:space-between;
}
select,input[type=number], .select-like {
  background:#0c0c0c;border:1px solid #171717;color:#f2f2f2;padding:10px;border-radius:8px;min-width:160px;
}
.markets, .sports, .days {
  display:flex;gap:8px;flex-wrap:wrap;
}
.chip{
  background:#101010;border:1px solid #161616;color:#ddd;padding:8px 10px;border-radius:10px;cursor:pointer;user-select:none;
  transition:0.2s;
}
.chip.active{background:var(--accent);color:#000;transform:scale(1.03);box-shadow:0 6px 18px rgba(0,255,136,0.08);}
.actions{display:flex;gap:10px;flex-wrap:wrap;}
button.btn{
  background:var(--accent);color:#000;border:none;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;
  box-shadow:0 6px 18px rgba(0,255,136,0.06);
}
button.ghost{background:transparent;border:1px solid #222;color:var(--muted);}
#bilheteContainer{margin-top:14px;display:flex;flex-direction:column;gap:12px;align-items:center;}
.card{
  background:var(--card);border:1px solid rgba(0,255,136,0.08);padding:12px;border-radius:10px;opacity:0;transform:translateY(14px);
  transition:all .35s cubic-bezier(.2,.9,.3,1);
  width:100%;
  max-width:600px;
}
.card.show{opacity:1;transform:none;}
.card h3{margin:0;font-size:15px;color:#fff}
.meta{font-size:13px;color:var(--muted);margin-top:6px}
.stats-line{margin-top:8px;font-size:13px}
.stat-green{color:var(--accent)}
.stat-yellow{color:#ffcc00}
.stat-red{color:#ff4d4d}
.legend{margin-top:14px;color:var(--muted);font-size:13px;line-height:1.5}
.foot{margin-top:18px;color:#7a7a7a;font-size:13px;text-align:center}
#pixBtn{margin-top:12px;cursor:pointer;display:inline-block;background:#0c0c0c;color:var(--accent);padding:10px 14px;border-radius:10px;font-weight:600;}
/* Modal */
.modal{
  display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:60;padding:28px;overflow:auto;
}
.modal .panel{max-width:900px;margin:20px auto;background:#070707;padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.modal h2{margin:0 0 8px;color:var(--accent)}
table.stats{width:100%;border-collapse:collapse;margin-top:10px;color:var(--muted);font-size:14px}
table.stats th, table.stats td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.02);text-align:left}
.small{font-size:13px;color:var(--muted)}
/* bilhete central animation */
@keyframes highlight {
  0%{transform:scale(0.5) translateY(-50px);opacity:0;}
  50%{transform:scale(1.1) translateY(10px);opacity:1;}
  100%{transform:scale(1) translateY(0);}
}
.card.highlight{animation:highlight 0.5s ease forwards;}
@media(max-width:720px){ .row{flex-direction:column;align-items:stretch} .field{flex-direction:column;align-items:stretch} .markets,.sports,.days{justify-content:flex-start} }
</style>
</head>
<body>

<div id="loginScreen" style="position:fixed;inset:0;background:#000;display:flex;justify-content:center;align-items:center;flex-direction:column;z-index:100;">
  <h2 style="color:var(--accent);margin-bottom:12px;">Digite seu c√≥digo</h2>
  <input id="codeInput" type="text" maxlength="6" placeholder="C√≥digo" style="padding:10px 14px;border-radius:8px;border:none;width:160px;margin-bottom:12px;">
  <button id="loginBtn" class="btn">Entrar</button>
  <div id="loginMsg" style="color:#ff4d4d;margin-top:8px;"></div>
</div>

<header>
  <h1>üéØ Gerador de Bilhete üéüÔ∏è <small style="font-size:12px;color:#777;">beta</small></h1>
</header>

<div class="wrap" role="main" style="display:none;" id="appMain">

  <div class="controls">

    <div style="display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;margin-bottom:10px;">
      <div>
        <label class="small">Quantidade de jogos</label><br>
        <input id="qtd" type="number" min="1" value="3" style="width:84px">
      </div>
      <div>
        <label class="small">Odd m√≠nima</label><br>
        <input id="minOdd" type="number" step="0.01" value="1.20" style="width:96px"><br>
        <label class="small">Odd m√°xima</label><br>
        <input id="maxOdd" type="number" step="0.01" value="2.50" style="width:96px">
      </div>
    </div>

    <div class="actions" style="margin-bottom:10px;">
      <button id="generateBtn" class="btn" style="padding:12px 20px;font-size:16px;">üé≤ Gerar Bilhete</button>
      <button id="estatBtn" class="btn">üìä Estat√≠sticas</button>
      <button id="copiarBtn" class="btn">üìã Copiar</button>
      <button id="pdfBtn" class="btn">üíæ PDF</button>
    </div>

    <!-- esporte selector: multi via chips + quick "apenas futebol" -->
    <div class="field">
      <div>
        <div style="color:var(--muted);margin-bottom:6px">Escolher esporte</div>
        <div class="sports" id="sportsWrap">
          <!-- chips via JS -->
        </div>
      </div>

      <div>
        <label class="small">Filtro de dia</label>
        <div class="days" id="daysWrap" style="margin-top:6px"></div>
      </div>
    </div>

    <div style="margin-top:8px;">
      <div style="color:var(--muted);margin-bottom:6px">Mercados (selecion√°veis)</div>
      <div class="markets" id="marketsWrap"></div>
    </div>

    <label class="ch" style="margin-top:8px"><input id="onlyFootball" type="checkbox">Somente Futebol</label>

  </div>

  <div id="bilheteContainer"></div>

  <div class="legend">
    üîπ <strong>GC:</strong> GREEN EM CASA &nbsp;|&nbsp;
    üîπ <strong>GF:</strong> GREEN FORA DE CASA &nbsp;|&nbsp;
    üîπ <strong>GG:</strong> √öLTIMOS CONFRONTOS DIRETOS
  </div>

  <div id="pixBtn">pix e-mail: geradordebilhete@gmail.com ‚Ä¢ clique para copiar</div>
</div>

<!-- Estat√≠sticas Modal -->
<div id="estatModal" class="modal" aria-hidden="true">
  <div class="panel">
    <button id="closeEstat" style="float:right;background:var(--accent);border:none;padding:8px 10px;border-radius:8px;cursor:pointer">Fechar</button>
    <h2>üìä Estat√≠sticas</h2>
    <div id="estatContent" style="margin-top:8px"></div>
  </div>
</div>

<script>
/* ========== C√ìDIGOS PR√â-CADASTRADOS ========== */
let codigos = {
  "adm": {code:"082111", type:"adm", used:false, expire:null},
  "teste": [],
  "30dias": []
};

// gerar 25 c√≥digos teste 24h
for(let i=0;i<25;i++){
  let c = Math.floor(100000 + Math.random()*900000).toString();
  codigos.teste.push({code:c, type:"teste", used:false, expire:Date.now()+24*3600*1000});
}
// gerar 25 c√≥digos 30 dias
for(let i=0;i<25;i++){
  let c = Math.floor(100000 + Math.random()*900000).toString();
  codigos["30dias"].push({code:c, type:"30dias", used:false, expire:Date.now()+30*24*3600*1000});
}

/* ========== DADOS DE PALPITES ========== */
const palpites = [
  {esporte:"Futebol", dia:"domingo", jogo:"Flamengo x Palmeiras", mercado:"+1.5 Gols", odd:1.45, gc:"3/5", gf:"3/5", gg:"3/5"},
  {esporte:"Futebol", dia:"domingo", jogo:"Mirassol x S√£o Paulo", mercado:"+1.5 Gols", odd:1.50, gc:"9/10", gf:"3/5", gg:"11/12"},
  {esporte:"Futebol", dia:"domingo", jogo:"Getafe x Real Madrid", mercado:"Vit√≥ria", odd:1.40, gc:"4V 1D", gf:"4V 1D", gg:"8/10"},
  {esporte:"Futebol", dia:"domingo", jogo:"Celta de Vigo x Real Sociedad", mercado:"+0.5 Gols Casa", odd:1.22, gc:"5/5", gf:"4/5", gg:"4/5"},
  {esporte:"Futebol", dia:"domingo", jogo:"Como x Juventus", mercado:"+1.5 Gols", odd:1.40, gc:"10/10", gf:"4/5", gg:"4/4"},
  {esporte:"Futebol", dia:"domingo", jogo:"Milan x Fiorentina", mercado:"Vit√≥ria", odd:1.55, gc:"4V 1D", gf:"4E 1V", gg:"2V 2D 1E"}
];

/* ========== LISTAS DE MERCADOS, ESPORTES, DIAS ========== */
const marketsList = ["Vit√≥ria","Dupla Chance","+0.5 Gols 1T","+0.5 Gols Casa","+0.5 Gols Fora","+1.5 Gols","Ambas Marcam","Over 2.5","Under 3.5","Handicap"];
const sportsList = ["Futebol","Basquete","T√™nis","V√¥lei","Futsal"];
const daysList = ["segunda","ter√ßa","quarta","quinta","sexta","s√°bado","domingo"];

/* ========== ELEMENTOS ========== */
const bilheteContainer = document.getElementById("bilheteContainer");
const marketsWrap = document.getElementById("marketsWrap");
const sportsWrap = document.getElementById("sportsWrap");
const daysWrap = document.getElementById("daysWrap");
const generateBtn = document.getElementById("generateBtn");
const estatBtn = document.getElementById("estatBtn");
const estatModal = document.getElementById("estatModal");
const closeEstat = document.getElementById("closeEstat");
const estatContent = document.getElementById("estatContent");
const copiarBtn = document.getElementById("copiarBtn");
const pdfBtn = document.getElementById("pdfBtn");
const onlyFootball = document.getElementById("onlyFootball");
const loginScreen = document.getElementById("loginScreen");
const codeInput = document.getElementById("codeInput");
const loginBtn = document.getElementById("loginBtn");
const loginMsg = document.getElementById("loginMsg");
const appMain = document.getElementById("appMain");
const pixBtn = document.getElementById("pixBtn");

/* ========== FUN√á√ïES ========== */
function mkChip(text, container, initial=true){
  const el = document.createElement("div");
  el.className = "chip" + (initial ? " active" : "");
  el.textContent = text;
  el.dataset.value = text;
  el.addEventListener("click", ()=> el.classList.toggle("active"));
  container.appendChild(el);
  return el;
}

/* render chips */
marketsList.forEach(m => mkChip(m, marketsWrap, true));
sportsList.forEach(s => mkChip(s, sportsWrap, s==="Futebol"));
daysList.forEach(d=>{
  const el = document.createElement("div");
  el.className = "chip" + (d==="domingo" ? " active" : "");
  el.textContent = d[0].toUpperCase()+d.slice(1);
  el.dataset.value=d;
  el.addEventListener("click", ()=>{
    document.querySelectorAll('#daysWrap .chip').forEach(c=>c.classList.remove('active'));
    el.classList.add('active');
  });
  daysWrap.appendChild(el);
});

/* parse stat */
function parseFractionPercent(stat){
  try{
    if(!stat || stat.trim()==='-') return null;
    if(stat.includes('/')){
      const parts = stat.split('/').map(s=>parseInt(s.replace(/\D/g,'')));
      if(parts.length>=2 && parts[1]>0) return Math.round(parts[0]/parts[1]*100);
    }
    const winMatch = stat.match(/(\d+)\s*V/i);
    const nums = stat.match(/\d+/g);
    if(nums && nums.length>0){
      const total = nums.map(n=>parseInt(n,10)).reduce((a,b)=>a+b,0);
      let wins = 0;
      if(winMatch) wins=parseInt(winMatch[1],10);
      else { const lastV=stat.match(/(\d+)\s*[Vv]/); wins=lastV?parseInt(lastV[1],10):parseInt(nums[0],10);}
      if(total>0) return Math.round((wins/total)*100);
    }
  }catch(e){}
  return null;
}

/* ========== GERAR BILHETE ========== */
function gerarBilhete(){
  const qtd = Math.max(1, parseInt(document.getElementById("qtd").value||3));
  const minOdd = parseFloat(document.getElementById("minOdd").value||1.0);
  const maxOdd = parseFloat(document.getElementById("maxOdd").value||999);
  const selectedMarkets = Array.from(document.querySelectorAll('#marketsWrap .chip.active')).map(n=>n.dataset.value.toLowerCase());
  const selectedSports = Array.from(document.querySelectorAll('#sportsWrap .chip.active')).map(n=>n.dataset.value.toLowerCase());
  const dayEl = document.querySelector('#daysWrap .chip.active');
  const selectedDay = dayEl ? dayEl.dataset.value : "domingo";
  const onlyF = onlyFootball.checked;

  let filtered = palpites.filter(p=>{
    const pMarket = String(p.mercado||'').toLowerCase();
    const pSport = String(p.esporte||'').toLowerCase();
    const pDay = String(p.dia||'').toLowerCase();
    const oddOK = (p.odd>=minOdd && p.odd<=maxOdd);
    const marketOK = selectedMarkets.includes(pMarket);
    const sportByUser = onlyF?(pSport==='futebol'):selectedSports.includes(pSport);
    const dayOK = (pDay===selectedDay);
    return oddOK && marketOK && sportByUser && dayOK;
  });

  filtered = filtered.sort(()=>0.5-Math.random()).slice(0,qtd);

  bilheteContainer.innerHTML="";
  filtered.forEach(p=>{
    const div = document.createElement("div");
    div.className="card highlight";
    div.innerHTML=`<h3>${p.jogo}</h3>
    <div class="meta">Esporte: ${p.esporte} | Mercado: ${p.mercado} | Odd: ${p.odd}</div>
    <div class="stats-line">
      <span class="stat-green">GC:${p.gc}</span> | <span class="stat-green">GF:${p.gf}</span> | <span class="stat-yellow">GG:${p.gg}</span>
    </div>`;
    bilheteContainer.appendChild(div);
  });
}

/* ========== ESTAT√çSTICAS ========== */
function showEstatisticas(){
  const total = palpites.length;
  let html="<h3>üìä Estat√≠sticas do Gerador</h3>";
  html+=`<table class="stats"><tr><th>Total de palpites</th><td>${total}</td></tr></table>`;
  estatContent.innerHTML=html;
  estatModal.style.display="block";
}

/* ========== COPIAR / PDF ========== */
copiarBtn.addEventListener("click",()=>{
  let text = Array.from(bilheteContainer.querySelectorAll(".card")).map(c=>c.innerText).join("\n\n");
  navigator.clipboard.writeText(text).then(()=>alert("Bilhete copiado!"));
});

pdfBtn.addEventListener("click",()=>{
  const { jsPDF } = window.jspdf;
  let doc = new jsPDF();
  let y=10;
  Array.from(bilheteContainer.querySelectorAll(".card")).forEach(c=>{
    const t=c.innerText.split('\n');
    t.forEach(line=>{doc.text(line,10,y);y+=6;});
    y+=6;
  });
  doc.save("bilhete.pdf");
});

/* ========== MODAL ========== */
closeEstat.addEventListener("click",()=>estatModal.style.display="none");

/* ========== LOGIN ========== */
function checkCode(code){
  code=code.trim();
  if(code===codigos.adm.code && !codigos.adm.used) return codigos.adm;
  const allCodes = codigos.teste.concat(codigos["30dias"]);
  for(let c of allCodes){
    if(c.code===code && !c.used){
      if(c.expire && Date.now()>c.expire) return null;
      return c;
    }
  }
  return null;
}

loginBtn.addEventListener("click",()=>{
  const code = codeInput.value.trim();
  const cObj = checkCode(code);
  if(!cObj){loginMsg.textContent="C√≥digo inv√°lido ou expirado";return;}
  cObj.used=true;
  loginScreen.style.display="none";
  appMain.style.display="block";
  if(cObj.type!=="adm") setInterval(()=>updateTime(cObj),1000);
});

function updateTime(c){
  if(!c.expire) return;
  const diff = c.expire - Date.now();
  if(diff<=0){
    alert("Seu c√≥digo expirou!");
    location.reload();
    return;
  }
  const dias = Math.floor(diff/(1000*3600*24));
  const horas = Math.floor((diff%(1000*3600*24))/(1000*3600));
  const mins = Math.floor((diff%(1000*3600))/(1000*60));
  const secs = Math.floor((diff%(1000*60))/1000);
  loginMsg.textContent=`Expira em ${dias}d ${horas}h ${mins}m ${secs}s`;
}

/* ========== EVENTOS ========== */
generateBtn.addEventListener("click",gerarBilhete);
estatBtn.addEventListener("click",showEstatisticas);
pixBtn.addEventListener("click",()=>navigator.clipboard.writeText("geradordebilhete@gmail.com").then(()=>alert("E-mail copiado!")));
</script>

</body>
</html>