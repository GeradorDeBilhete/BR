<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>🎯 Gerador de Bilhete 🎟️ Beta</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#000000;
  --panel:#0b0b0b;
  --muted:#bfbfbf;
  --accent:#00ff88;
  --accent-2:#00cc66;
  --card:#0f0f0f;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Montserrat",system-ui,Arial,sans-serif;
  background:var(--bg);
  color:#f2f2f2;
  -webkit-font-smoothing:antialiased;
}
header{text-align:center;padding:20px 16px 8px;}
h1{margin:0;color:var(--accent);font-size:24px;font-weight:700;text-shadow:0 0 8px rgba(0,255,136,0.08);}
.wrap{max-width:900px;margin:18px auto;padding:18px;background:var(--panel);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6);}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between;}
label.ch{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:14px;}
.controls{padding:8px 0 6px;display:flex;flex-direction:column;gap:10px;}
.field{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:space-between;}
select,input[type=number], .select-like {background:#0c0c0c;border:1px solid #171717;color:#f2f2f2;padding:10px;border-radius:8px;min-width:160px;}
.markets, .sports, .days {display:flex;gap:8px;flex-wrap:wrap;}
.chip{background:#101010;border:1px solid #161616;color:#ddd;padding:8px 10px;border-radius:10px;cursor:pointer;user-select:none;font-size:13px;}
.chip.active{background:var(--accent);color:#000;transform:scale(1.03);box-shadow:0 6px 18px rgba(0,255,136,0.08);}
.actions{display:flex;gap:10px;flex-wrap:wrap;}
button.btn{background:var(--accent);color:#000;border:none;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(0,255,136,0.06);}
button.ghost{background:transparent;border:1px solid #222;color:var(--muted);}
#bilheteContainer{margin-top:20px;display:flex;flex-direction:column;gap:12px;align-items:center;}
.card{background:var(--card);border:1px solid rgba(0,255,136,0.08);padding:14px;border-radius:12px;opacity:0;transform:translateY(14px);transition:all .35s cubic-bezier(.2,.9,.3,1);}
.card.show{opacity:1;transform:none;animation:pulse 0.8s ease-in-out;}
.card h3{margin:0;font-size:16px;color:#fff;text-align:center;}
.stats-line{margin-top:8px;font-size:14px;text-align:center;}
.stat-green{color:var(--accent)}
.stat-yellow{color:#ffcc00}
.stat-red{color:#ff4d4d}
.foot{margin-top:18px;color:#7a7a7a;font-size:13px;text-align:center}
#marketsSection,#sportsSection{display:none;margin-top:12px;}
.show-section{display:flex;flex-wrap:wrap;gap:8px;}
@keyframes pulse {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); }
}
@media(max-width:720px){ .row{flex-direction:column;align-items:stretch} .field{flex-direction:column;align-items:stretch} .markets,.sports{justify-content:flex-start} }
</style>
</head>
<body>

<header>
  <h1>🎯 Gerador de Bilhete 🎟️ Beta</h1>
</header>

<div class="wrap" role="main">

  <div class="controls">
    <div class="row">
      <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:center">
        <label class="small">Quantidade de jogos</label>
        <input id="qtd" type="number" min="1" value="3" style="width:80px">
        <label class="small">Odd mínima</label>
        <input id="minOdd" type="number" step="0.01" value="1.20" style="width:80px">
        <label class="small">Odd máxima</label>
        <input id="maxOdd" type="number" step="0.01" value="2.50" style="width:80px">
        <label class="small">% mínimo de acerto</label>
        <input id="minPercent" type="number" step="1" value="50" style="width:80px">
      </div>
    </div>

    <div style="margin-top:12px;">
      <button id="toggleSportsBtn" class="btn ghost">🎮 Escolher Esportes</button>
      <div id="sportsSection" class="sports"></div>
    </div>
    <div style="margin-top:12px;">
      <button id="toggleMarketsBtn" class="btn ghost">📈 Escolher Mercados</button>
      <div id="marketsSection" class="markets"></div>
    </div>

    <div id="generateBtnWrapper" style="margin-top:12px;">
      <button id="generateBtn" class="btn" style="font-size:16px;padding:12px 18px;">🎲 Gerar Bilhete</button>
    </div>

    <div class="actions" style="justify-content:center;margin-top:10px;">
      <button id="estatBtn" class="btn">📊 Estatísticas</button>
      <button id="copiarBtn" class="btn">📋 Copiar Bilhete</button>
      <button id="pdfBtn" class="btn">💾 PDF</button>
    </div>

  </div>

  <div id="bilheteContainer"></div>

  <div style="margin-top:20px;text-align:center;">
    <button id="pixBtn" class="btn" style="background:#ffcc00;color:#000;">💰 Doação Pix</button>
  </div>

</div>

<!-- Estatísticas Modal -->
<div id="estatModal" class="modal" aria-hidden="true" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:60;padding:28px;overflow:auto;">
  <div class="panel" style="max-width:900px;margin:20px auto;background:#070707;padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)">
    <button id="closeEstat" style="float:right;background:var(--accent);border:none;padding:8px 10px;border-radius:8px;cursor:pointer">Fechar</button>
    <h2>📊 Estatísticas do Gerador</h2>
    <div id="estatContent" style="margin-top:8px"></div>
  </div>
</div>

<script>
// ============ PALPITES PENDENTES ===========
const palpites = [
  {esporte:"Futebol",jogo:"San Martin SJ x Independiente",mercado:"-3.5 gols",odd:1.11,percent:80},
  {esporte:"Futebol",jogo:"San Martin SJ x Independiente",mercado:"-1.5 gol 1T",odd:1.20,percent:75},
  {esporte:"Futebol",jogo:"San Martin SJ x Independiente",mercado:"-0.5 gol 1T",odd:2.10,percent:60},
  {esporte:"Futebol",jogo:"Empoli x Venezia",mercado:"-3.5 gols",odd:1.22,percent:70},
  {esporte:"Futebol",jogo:"Empoli x Venezia",mercado:"-1.5 gols 1T",odd:1.33,percent:65},
  {esporte:"Futebol",jogo:"Rosario Central x Platense",mercado:"-3.5 gols",odd:1.14,percent:75},
  {esporte:"Futebol",jogo:"Rosario Central x Platense",mercado:"Casa ou Empate",odd:1.11,percent:80},
  {esporte:"Futebol",jogo:"Rosario Central x Platense",mercado:"Vitória Casa",odd:1.72,percent:65},
  {esporte:"Futebol",jogo:"Rosario Central x Platense",mercado:"+0.5 gol casa",odd:1.40,percent:62},
  {esporte:"Futebol",jogo:"Rosario Central x Platense",mercado:"+1.5 gol casa",odd:1.77,percent:58},
  {esporte:"Futebol",jogo:"Juventude x Atletico-GO",mercado:"-3.5 gols",odd:1.11,percent:78},
  {esporte:"Futebol",jogo:"Juventude x Atletico-GO",mercado:"+0.5 gol casa",odd:1.34,percent:64},
  {esporte:"Futebol",jogo:"Juventude x Atletico-GO",mercado:"+1.5 gol casa",odd:1.77,percent:57},
  {esporte:"Futebol",jogo:"Juventude x Atletico-GO",mercado:"Vitória Casa",odd:1.33,percent:64},
  {esporte:"Futebol",jogo:"Juventude x Atletico-GO",mercado:"Empate",odd:3.11,percent:50},
  {esporte:"Futebol",jogo:"Paris FC x Lens",mercado:"Vitória Casa",odd:1.57,percent:60},
  {esporte:"Futebol",jogo:"Paris FC x Lens",mercado:"+0.5 gol casa",odd:1.22,percent:68},
  {esporte:"Futebol",jogo:"Paris FC x Lens",mercado:"+1.5 gol casa",odd:1.40,percent:55},
  {esporte:"Futebol",jogo:"Paris FC x Lens",mercado:"-0.5 gol 1T",odd:1.72,percent:62},
  {esporte:"Futebol",jogo:"Paris FC x Lens",mercado:"+0.5 gol 1T",odd:1.40,percent:60},
  {esporte:"Futebol",jogo:"Paris FC x Lens",mercado:"+1.5 gol 1T",odd:1.77,percent:55},
  {esporte:"Futebol",jogo:"Liverpool x Manchester City",mercado:"+0.5 gol casa",odd:1.15,percent:70},
  {esporte:"Futebol",jogo:"Liverpool x Manchester City",mercado:"+1.5 gol casa",odd:1.33,percent:60},
  {esporte:"Futebol",jogo:"Liverpool x Manchester City",mercado:"Vitória Casa",odd:1.72,percent:62}
];

// ============ ESPORTES E MERCADOS ===========
const sportsList = [...new Set(palpites.map(p=>p.esporte))];
const marketsList = [...new Set(palpites.map(p=>p.mercado))];

// ============ ELEMENTOS ===========
const bilheteContainer=document.getElementById("bilheteContainer");
const generateBtn=document.getElementById("generateBtn");
const qtdInput=document.getElementById("qtd");
const minOddInput=document.getElementById("minOdd");
const maxOddInput=document.getElementById("maxOdd");
const minPercentInput=document.getElementById("minPercent");
const toggleSportsBtn=document.getElementById("toggleSportsBtn");
const toggleMarketsBtn=document.getElementById("toggleMarketsBtn");
const sportsSection=document.getElementById("sportsSection");
const marketsSection=document.getElementById("marketsSection");
const estatBtn=document.getElementById("estatBtn");
const estatModal=document.getElementById("estatModal");
const closeEstat=document.getElementById("closeEstat");
const estatContent=document.getElementById("estatContent");

// ============ FUNÇÕES ===========
function gerarBilhete(){
  bilheteContainer.innerHTML="";
  let qtd=Number(qtdInput.value);
  let minOdd=Number(minOddInput.value);
  let maxOdd=Number(maxOddInput.value);
  let minPerc=Number(minPercentInput.value);

  let selectedSports = Array.from(document.querySelectorAll("#sportsSection .chip.active")).map(c=>c.textContent);
  let selectedMarkets = Array.from(document.querySelectorAll("#marketsSection .chip.active")).map(c=>c.textContent);

  let filtered=palpites.filter(p=>{
    if(p.odd<minOdd || p.odd>maxOdd || p.percent<minPerc) return false;
    if(selectedSports.length>0 && !selectedSports.includes(p.esporte)) return false;
    if(selectedMarkets.length>0 && !selectedMarkets.includes(p.mercado)) return false;
    return true;
  });

  if(filtered.length<qtd) qtd=filtered.length;

  let bilhete=[];
  let oddTotal=1;
  let greenTotal=0;

  for(let i=0;i<qtd;i++){
    let idx=Math.floor(Math.random()*filtered.length);
    let p=filtered.splice(idx,1)[0];
    bilhete.push(p);
    oddTotal*=p.odd;
    greenTotal+=p.percent;
  }

  let card=document.createElement("div");
  card.className="card show";

  let content=`<h3>🎟️ Bilhete Gerado (${qtd} jogos)</h3>`;
  bilhete.forEach(p=>{
    let emoji="";
    if(p.mercado.includes("+1.5")) emoji="⚽";
    else if(p.mercado.includes("Dupla")) emoji="🎯";
    else if(p.mercado.includes("Ambas")) emoji="✅";
    content+=`<div>${emoji} ${p.jogo} — ${p.mercado} | Odd: ${p.odd.toFixed(2)} | % Green: ${p.percent}%</div>`;
  });

  let riskColor = oddTotal<2 ? "var(--accent)" : oddTotal<3 ? "#ffcc00" : "#ff4d4d";
  content+=`<div class="stats-line" style="color:${riskColor}">💹 Odd Total: ${oddTotal.toFixed(2)} | % Green Médio: ${(greenTotal/qtd).toFixed(1)}%</div>`;
  card.innerHTML=content;
  bilheteContainer.appendChild(card);
}

// ============ ESTATÍSTICAS ===========
function mostrarEstatisticas(){
  let total=palpites.length;
  let oddMed=palpites.reduce((a,b)=>a+b.odd,0)/total;
  let percentMed=palpites.reduce((a,b)=>a+b.percent,0)/total;

  let html=`<p>Total de Palpites: ${total}</p>`;
  html+=`<p>Odd Média: ${oddMed.toFixed(2)}</p>`;
  html+=`<p>% Green Médio: ${percentMed.toFixed(1)}%</p>`;
  html+=`<p>Mercados disponíveis: ${marketsList.join(", ")}</p>`;
  html+=`<p>Esportes disponíveis: ${sportsList.join(", ")}</p>`;
  estatContent.innerHTML=html;
}

// ============ INICIALIZAÇÃO ===========
sportsList.forEach(s=>{
  let c=document.createElement("div");
  c.className="chip";
  c.textContent=s;
  c.onclick=()=>c.classList.toggle("active");
  sportsSection.appendChild(c);
});

marketsList.forEach(m=>{
  let c=document.createElement("div");
  c.className="chip";
  c.textContent=m;
  c.onclick=()=>c.classList.toggle("active");
  marketsSection.appendChild(c);
});

toggleSportsBtn.onclick=()=>sportsSection.classList.toggle("show-section");
toggleMarketsBtn.onclick=()=>marketsSection.classList.toggle("show-section");
generateBtn.onclick=gerarBilhete;
estatBtn.onclick=()=>estatModal.style.display="block";
closeEstat.onclick=()=>estatModal.style.display="none";

</script>
<!-- Dentro do mesmo HTML anterior, substitua ou acrescente este trecho no JavaScript -->

<script>
// ============ FILTRO DINÂMICO ===========
function atualizarBilhete(){
  bilheteContainer.innerHTML="";
  let qtd=Number(qtdInput.value);
  let minOdd=Number(minOddInput.value);
  let maxOdd=Number(maxOddInput.value);
  let minPerc=Number(minPercentInput.value);

  // Pegando os filtros ativos
  let selectedSports = Array.from(document.querySelectorAll("#sportsSection .chip.active")).map(c=>c.textContent);
  let selectedMarkets = Array.from(document.querySelectorAll("#marketsSection .chip.active")).map(c=>c.textContent);

  let filtered=palpites.filter(p=>{
    if(p.odd<minOdd || p.odd>maxOdd || p.percent<minPerc) return false;
    if(selectedSports.length>0 && !selectedSports.includes(p.esporte)) return false;
    if(selectedMarkets.length>0 && !selectedMarkets.includes(p.mercado)) return false;
    return true;
  });

  if(filtered.length<qtd) qtd=filtered.length;
  if(qtd===0) return;

  let bilhete=[];
  let oddTotal=1;
  let greenTotal=0;

  for(let i=0;i<qtd;i++){
    let idx=Math.floor(Math.random()*filtered.length);
    let p=filtered.splice(idx,1)[0];
    bilhete.push(p);
    oddTotal*=p.odd;
    greenTotal+=p.percent;
  }

  let card=document.createElement("div");
  card.className="card show";

  let content=`<h3>🎟️ Bilhete Atualizado (${qtd} jogos)</h3>`;
  bilhete.forEach(p=>{
    let emoji="";
    if(p.mercado.includes("+1.5")) emoji="⚽";
    else if(p.mercado.includes("Dupla")) emoji="🎯";
    else if(p.mercado.includes("Ambas")) emoji="✅";
    content+=`<div>${emoji} ${p.jogo} — ${p.mercado} | Odd: ${p.odd.toFixed(2)} | % Green: ${p.percent}%</div>`;
  });

  let riskColor = oddTotal<2 ? "var(--accent)" : oddTotal<3 ? "#ffcc00" : "#ff4d4d";
  content+=`<div class="stats-line" style="color:${riskColor}">💹 Odd Total: ${oddTotal.toFixed(2)} | % Green Médio: ${(greenTotal/qtd).toFixed(1)}%</div>`;
  card.innerHTML=content;
  bilheteContainer.appendChild(card);
}

// ============ EVENTOS ===========
generateBtn.onclick=atualizarBilhete;

// Atualiza automaticamente sempre que mudar filtros ou valores
qtdInput.oninput=atualizarBilhete;
minOddInput.oninput=atualizarBilhete;
maxOddInput.oninput=atualizarBilhete;
minPercentInput.oninput=atualizarBilhete;

// Atualiza ao clicar nos chips de esportes/mercados
document.querySelectorAll("#sportsSection .chip, #marketsSection .chip").forEach(c=>{
  c.onclick=()=>{
    c.classList.toggle("active");
    atualizarBilhete();
  }
});

// Inicializa com bilhete já gerado
window.onload=atualizarBilhete;
</script>
</body>
</html>